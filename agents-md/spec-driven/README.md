# 스펙 중심 개발 패턴

모든 구현 전에 스펙 문서를 먼저 확인하도록 강제하는 개발 방법론입니다.

## 핵심 원칙

> "스펙이 없으면 코드를 먼저 쓰지 말고, 최소 스펙을 먼저 만든다."

이 패턴은 다음을 방지합니다:
- 문서화되지 않은 기능
- 일관성 없는 구현
- 잃어버린 아키텍처 결정
- 불명확한 요구사항

## 디렉토리 구조

```
your-project/
├── AGENTS.md              # AI 에이전트 지침
├── CLAUDE.md              # (선택) AGENTS.md 심볼릭 링크
└── spec/
    ├── README.md          # 스펙 인덱스 및 로딩 규칙
    ├── overview/          # 아키텍처, 개념, 기술 스택
    ├── contracts/         # 데이터 계약, 인터페이스, 스키마
    ├── operations/        # 설정, 관측성, 마일스톤
    ├── tasks/             # 작업 단위 스펙
    └── decisions/         # 아키텍처 결정 기록 (ADR)
```

## 스펙 로딩 프로토콜

### 작업 시작 시
1. **반드시** `spec/README.md`를 먼저 읽는다
2. 어떤 스펙이 해당되는지 결정한다
3. **필요한 문서만** 읽는다 (전체 로드 금지 - 컨텍스트 절약)

### 로딩 우선순위
1. TL;DR / Status
2. Interfaces / Data Contracts
3. Acceptance Criteria

### 스펙을 못 찾겠으면
1. `spec/README.md`에 "스펙 누락"으로 기록
2. 사용자에게 1~3개의 짧은 확인 질문
3. `spec/tasks/`에 작업 스펙을 생성

## 구현 순서 (항상)

1. 스펙 업데이트/신규 작성
2. 구현
3. 최소 검증 (테스트/fixture/trace 중 가능한 것)

## 충돌 처리

변경이 스펙과 충돌하면:
- "코드를 스펙에 맞춘다" 또는
- "스펙을 변경한다"

중 하나를 **명시적으로 선택**하고 스펙에 근거를 남긴다.

## 결과물 기록 규칙

코드 변경이 발생한 작업은 답변에 다음을 항상 포함:
- 참고/수정한 스펙 경로
- 변경한 파일 경로
- 실행한 검증 커맨드 (있으면)

## 사용법

1. `AGENTS.md`를 프로젝트 루트에 복사
2. `spec/` 디렉토리 구조 생성
3. `spec/README.md`에 프로젝트 스펙 인덱스 작성
4. 필요에 따라 디렉토리 역할 커스터마이징
