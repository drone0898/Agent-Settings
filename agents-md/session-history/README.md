# 세션 히스토리 패턴

세션 간 컨텍스트를 보존하여 연속 작업을 지원하는 패턴입니다.

## 핵심 개념

- 세션 시작 시 이전 작업 상태 자동 로드
- 세션 종료 시 작업 내용 자동 저장
- 30일 이상 오래된 세션 자동 아카이브

## 디렉토리 구조

```
your-project/
├── AGENTS.md                    # AI 에이전트 지침 (범용)
├── agents/                      # 서브에이전트 (도구 중립적)
│   ├── history-load.md          # 세션 시작 시 상태 로드
│   ├── history-save.md          # 세션 종료 시 상태 저장
│   └── history-archive.md       # 오래된 세션 아카이브
└── agent/
    └── history/
        ├── current_state.md     # 현재 프로젝트 상태
        ├── sessions/            # 세션별 로그
        │   └── YYYY-MM/
        │       └── YYYY-MM-DD_NNN.md
        ├── decisions/           # 아키텍처 결정
        └── archive/             # 월별 아카이브
```

## 워크플로우

```
세션 시작
    │
    ▼
history-load 실행
    │
    ▼
5-10줄 요약 반환:
- 현재 상태
- 블로커
- 다음 우선순위
    │
    ▼
작업 수행
    │
    ▼
세션 종료
    │
    ▼
history-save 실행
    │
    ▼
- 세션 로그 생성
- current_state.md 업데이트
```

## 기록 규칙

### 저장해야 하는 작업
- 기능 구현
- 아키텍처 결정
- 버그 수정
- 블로커 해결

### 저장하지 않는 작업
- Q&A만 한 세션
- 탐색만 한 세션
- 사소한 수정

## 사용법

1. `agents/` 디렉토리에 에이전트 파일 복사
2. `agent/history/` 디렉토리 구조 생성
3. `AGENTS.md`에 히스토리 사용 지침 추가
4. 세션 시작/종료 시 에이전트 호출

## 도구별 적용

| 도구 | 에이전트 지침 파일 | 서브에이전트 위치 |
|------|------------------|------------------|
| Claude Code | `CLAUDE.md` | `.claude/agents/` |
| Cursor | `AGENTS.md` | 프로젝트 루트 |
| 기타 | `AGENTS.md` | 프로젝트별 상이 |

범용 패턴이므로 각 도구에 맞게 파일명과 위치를 조정하세요.
